# !/bin/bash
# Override default values here
#CC=
#CXX=
#FC=
export SYCL_ROOT=$CMPROOT/linux
ENABLE_TESTS="OFF"
ENABLE_EXAMPLES="OFF"
ENABLE_EXAMPLES_NEW="ON"

# Default build parameters
: ${OCCA_BUILD_DIR:=`pwd`/build}
: ${OCCA_INSTALL_DIR:=`pwd`/install}
: ${OCCA_BUILD_TYPE:="RelWithDebInfo"}

: ${CC:="gcc"}
: ${CXX:="g++"}
: ${FC:="gfortran"}

: ${ENABLE_DPCPP:="ON"}
: ${ENABLE_OPENCL:="ON"}
: ${ENABLE_CUDA:="ON"}
: ${ENABLE_HIP="ON"}
: ${ENABLE_OPENMP="ON"}
: ${ENABLE_METAL="ON"}
: ${ENABLE_FORTRAN="OFF"}
: ${ENABLE_TESTS="ON"}
: ${ENABLE_EXAMPLES="ON"}
: ${ENABLE_EXAMPLES_NEW="OFF"}

cmake -S . -B ${OCCA_BUILD_DIR} \
  -DCMAKE_BUILD_TYPE=${OCCA_BUILD_TYPE} \
  -DCMAKE_INSTALL_PREFIX=${OCCA_INSTALL_DIR} \
  -DCMAKE_C_COMPILER=${CC} \
  -DCMAKE_CXX_COMPILER=${CXX} \
  -DCMAKE_Fortran_COMPILER=${FC} \
  -DCMAKE_CXX_FLAGS="${CXXFLAGS}" \
  -DCMAKE_C_FLAGS="${CFLAGS}" \
  -DCMAKE_Fortran_FLAGS="${FFLAGS}" \
  -DOCCA_ENABLE_OPENMP=${OCCA_ENABLE_OPENMP} \
  -DOCCA_ENABLE_OPENCL=${OCCA_ENABLE_OPENCL} \
  -DOCCA_ENABLE_DPCPP=${OCCA_ENABLE_DPCPP} \
  -DOCCA_ENABLE_CUDA=${OCCA_ENABLE_CUDA} \
  -DOCCA_ENABLE_HIP=${OCCA_ENABLE_HIP} \
  -DOCCA_ENABLE_METAL=${OCCA_ENABLE_METAL} \
  -DOCCA_ENABLE_FORTRAN=${OCCA_ENABLE_FORTRAN} \
  -DOCCA_ENABLE_TESTS=${OCCA_ENABLE_TESTS} \
  -DOCCA_ENABLE_EXAMPLES=${OCCA_ENABLE_EXAMPLES}
